Minifier
====

ライブラリ部分をいい感じに展開するツール。

```#include "libcomp/***.hpp"``` で読み込んだライブラリコードから必要な部分のみを抽出します。

## 使い方
### ビルド
- LLVM/Clangに依存しています。
  - Debian Wheezy + llvm.orgのaptリポジトリからインストールできるLLVM/Clang 3.5で開発しています。
- 必要なパッケージがそろっていれば ```cd src``` して ```make``` するだけでbin/minifierが生成されるはずです。
- テスト用の入出力は ```test``` 以下に入っています。ビルド後に ```make test``` でまとめてテストできます。

### オプションなど
    $ minifier -include=<ライブラリのルートへのパス> <入力ソースファイル>
- ```-include```オプションは複数指定できます。

## もう少し細かい挙動について
- C++11までの機能には対応している（つもり）です。
  - とはいえ手持ちのライブラリが適切に展開できるか、程度の確認しかできていないのが現状です。
- プリプロセッサマクロには対応していません。
  - REPマクロどころかNULLすらうまく処理できません。
- ソースコードの切り貼りは行単位で行われます。
  - 複数の定義を含む行があるとうまく動作しません。
- 何が残って何が消されるのか。
  - 基本的にはmain関数とグローバル変数の初期化から辿ることのできる要素のみが保持されます。
  - さらに細かい挙動はメモ書きレベルのドキュメントになりますが [specs.md](specs.md) を参照してください。
